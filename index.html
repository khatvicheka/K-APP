<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Korean Learning App</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome CDN for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <!-- Inter font from Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- jQuery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body class="flex flex-col min-h-screen">
    <!-- Header Navigation -->
    <header
      class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg p-4"
    >
      <div
        class="container mx-auto flex flex-col sm:flex-row justify-between items-center"
      >
        <h1 class="text-3xl font-bold mb-4 sm:mb-0">K-APP</h1>
        <nav>
          <ul class="flex space-x-4">
            <li>
              <a
                href="#"
                class="nav-link text-lg hover:text-blue-200 transition duration-300 ease-in-out active:text-blue-100"
                data-section="vocabulary"
                >Vocabulary</a
              >
            </li>
            <li>
              <a
                href="#"
                class="nav-link text-lg hover:text-blue-200 transition duration-300 ease-in-out active:text-blue-100"
                data-section="grammar"
                >Grammar</a
              >
            </li>
            <li>
              <a
                href="#"
                class="nav-link text-lg hover:text-blue-200 transition duration-300 ease-in-out active:text-blue-100"
                data-section="review-quiz"
                >Review & Quiz</a
              >
            </li>
            <li>
              <a
                href="#"
                class="nav-link text-lg hover:text-blue-200 transition duration-300 ease-in-out active:text-blue-100"
                data-section="settings"
                >Settings</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow container mx-auto p-6 md:p-8">
      <!-- Vocabulary Section -->
      <section
        id="vocabulary"
        class="section-content active bg-white p-6 rounded-xl shadow-lg"
      >
        <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-3">
          Vocabulary <i class="fas fa-book text-blue-500 ml-2"></i>
        </h2>
        <div class="flex flex-wrap items-center gap-4 mb-6">
          <input
            type="text"
            id="vocabSearch"
            placeholder="Search vocabulary..."
            class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          />
          <select
            id="vocabCategoryFilter"
            class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          >
            <option value>All Categories</option>
          </select>
          <select
            id="vocabStatusFilter"
            class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          >
            <option value>All Statuses</option>
          </select>
          <button
            id="addVocabBtn"
            class="bg-blue-600 text-white px-5 py-3 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out flex items-center shadow-md"
          >
            <i class="fas fa-plus mr-2"></i> Add New
          </button>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-full bg-white rounded-lg shadow-sm">
            <thead class="bg-gray-100 border-b border-gray-200">
              <tr>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider rounded-tl-lg"
                >
                  Korean
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                >
                  English
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                >
                  Category
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                >
                  Status
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                  style="width: 180px"
                >
                  Resource(s)
                </th>
                <th
                  class="py-3 px-4 text-right text-sm font-semibold text-gray-600 uppercase tracking-wider rounded-tr-lg"
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody id="vocabList" class="divide-y divide-gray-100">
              <!-- Vocabulary items will be rendered here by JavaScript -->
            </tbody>
          </table>
        </div>

        <div class="flex justify-between items-center mt-6">
          <button
            id="vocabPrevPage"
            class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Previous
          </button>
          <span id="vocabPageInfo" class="text-gray-600">Page 1 of 1</span>
          <button
            id="vocabNextPage"
            class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Next
          </button>
        </div>
      </section>

      <!-- Grammar Section -->
      <section
        id="grammar"
        class="section-content bg-white p-6 rounded-xl shadow-lg"
      >
        <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-3">
          Grammar <i class="fas fa-pencil-alt text-blue-500 ml-2"></i>
        </h2>
        <div class="flex flex-wrap items-center gap-4 mb-6">
          <input
            type="text"
            id="grammarSearch"
            placeholder="Search grammar..."
            class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          />
          <select
            id="grammarCategoryFilter"
            class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          >
            <option value>All Categories</option>
          </select>
          <select
            id="grammarStatusFilter"
            class="p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          >
            <option value>All Statuses</option>
          </select>
          <button
            id="addGrammarBtn"
            class="bg-blue-600 text-white px-5 py-3 rounded-lg hover:bg-blue-700 transition duration-300 ease-in-out flex items-center shadow-md"
          >
            <i class="fas fa-plus mr-2"></i> Add New
          </button>
        </div>

        <div class="overflow-x-auto">
          <table class="min-w-full bg-white rounded-lg shadow-sm">
            <thead class="bg-gray-100 border-b border-gray-200">
              <tr>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider rounded-tl-lg"
                >
                  Korean
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                >
                  English
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                >
                  Category
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                >
                  Status
                </th>
                <th
                  class="py-3 px-4 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider"
                  style="width: 180px"
                >
                  Resource(s)
                </th>
                <th
                  class="py-3 px-4 text-right text-sm font-semibold text-gray-600 uppercase tracking-wider rounded-tr-lg"
                >
                  Actions
                </th>
              </tr>
            </thead>
            <tbody id="grammarList" class="divide-y divide-gray-100">
              <!-- Grammar items will be rendered here by JavaScript -->
            </tbody>
          </table>
        </div>

        <div class="flex justify-between items-center mt-6">
          <button
            id="grammarPrevPage"
            class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Previous
          </button>
          <span id="grammarPageInfo" class="text-gray-600">Page 1 of 1</span>
          <button
            id="grammarNextPage"
            class="bg-gray-300 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-400 transition duration-300 ease-in-out disabled:opacity-50 disabled:cursor-not-allowed"
          >
            Next
          </button>
        </div>
      </section>

      <!-- Review & Quiz Section -->
      <section
        id="review-quiz"
        class="section-content bg-white p-6 rounded-xl shadow-lg"
      >
        <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-3">
          Review & Quiz <i class="fas fa-graduation-cap text-blue-500 ml-2"></i>
        </h2>
        <div class="flex flex-col md:flex-row gap-6 mb-6">
          <button
            id="startFlashcardsBtn"
            class="bg-purple-600 text-white px-5 py-3 rounded-lg hover:bg-purple-700 transition duration-300 ease-in-out flex items-center justify-center shadow-md flex-grow"
          >
            <i class="fas fa-clone mr-2"></i> Start Flashcards
          </button>
          <button
            id="startQuizBtn"
            class="bg-teal-600 text-white px-5 py-3 rounded-lg hover:bg-teal-700 transition duration-300 ease-in-out flex items-center justify-center shadow-md flex-grow"
          >
            <i class="fas fa-question-circle mr-2"></i> Start Quiz
          </button>
        </div>

        <!-- Flashcard UI -->
        <div
          id="flashcardContainer"
          class="hidden flex flex-col items-center justify-center bg-gray-100 p-8 rounded-xl shadow-inner min-h-[300px]"
        >
          <h3 class="text-2xl font-semibold mb-4 text-gray-700">
            Flashcard Mode
          </h3>
          <div
            id="flashcard"
            class="relative bg-white w-full max-w-md h-48 md:h-64 flex items-center justify-center text-3xl font-bold text-gray-800 border-2 border-blue-400 rounded-lg shadow-md cursor-pointer transition-transform duration-300 transform-gpu hover:scale-105"
          >
            <span id="flashcardContent">Click to reveal!</span>
            <span
              id="flashcardSide"
              class="absolute bottom-2 right-3 text-sm text-gray-500 italic"
              >Korean</span
            >
          </div>
          <div class="flex space-x-4 mt-6">
            <button
              id="nextFlashcardBtn"
              class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-300 ease-in-out shadow-md"
            >
              Next Card <i class="fas fa-arrow-right ml-2"></i>
            </button>
          </div>
        </div>

        <!-- Quiz UI -->
        <div
          id="quizContainer"
          class="hidden flex flex-col items-center justify-center bg-gray-100 p-8 rounded-xl shadow-inner min-h-[400px]"
        >
          <h3 class="text-2xl font-semibold mb-4 text-gray-700">Quiz Mode</h3>
          <p
            id="quizQuestion"
            class="text-xl font-medium text-gray-800 text-center mb-6 max-w-lg"
          ></p>
          <div
            id="quizOptions"
            class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full max-w-lg mb-6"
          >
            <!-- Quiz options will be rendered here -->
          </div>
          <div class="flex items-center space-x-4 mb-4">
            <p class="text-lg font-semibold text-gray-700">
              Score: <span id="quizScore" class="text-blue-600">0</span>
            </p>
            <p class="text-lg font-semibold text-gray-700">
              Question:
              <span id="quizCurrentQuestion" class="text-blue-600">0</span> /
              <span id="quizTotalQuestions" class="text-blue-600">0</span>
            </p>
          </div>
          <button
            id="nextQuizQuestionBtn"
            class="bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition duration-300 ease-in-out shadow-md hidden"
          >
            Next Question <i class="fas fa-arrow-right ml-2"></i>
          </button>
          <button
            id="restartQuizBtn"
            class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition duration-300 ease-in-out shadow-md hidden mt-4"
          >
            Restart Quiz <i class="fas fa-sync-alt ml-2"></i>
          </button>
        </div>
      </section>

      <!-- Settings Section -->
      <section
        id="settings"
        class="section-content bg-white p-6 rounded-xl shadow-lg"
      >
        <h2 class="text-3xl font-bold text-gray-800 mb-6 border-b-2 pb-3">
          Settings <i class="fas fa-cog text-blue-500 ml-2"></i>
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-10">
          <!-- Manage Categories Section -->
          <div
            class="md:col-span-2 bg-gray-50 p-6 rounded-xl shadow-sm border border-gray-200"
          >
            <h3 class="text-2xl font-semibold text-gray-700 mb-4">
              Manage Categories <i class="fas fa-tags text-gray-500 ml-2"></i>
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Vocabulary Categories -->
              <div
                class="bg-white p-4 rounded-lg shadow-inner border border-gray-200"
              >
                <h4 class="text-xl font-medium text-gray-800 mb-3">
                  Vocabulary Categories
                </h4>
                <div class="flex mb-3">
                  <input
                    type="text"
                    id="newVocabCategoryInput"
                    placeholder="New category name"
                    class="flex-grow p-2 border border-gray-300 rounded-l-lg focus:ring-blue-500 focus:border-blue-500"
                  />
                  <button
                    id="addVocabCategoryBtn"
                    class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600 transition duration-300"
                  >
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <ul
                  id="vocabCategoryList"
                  class="list-disc pl-5 max-h-40 overflow-y-auto"
                >
                  <!-- Vocab categories will be listed here -->
                </ul>
                <div class="flex justify-between items-center mt-3">
                  <button
                    id="vocabCategoryPrevPage"
                    class="bg-gray-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm"
                  >
                    Previous
                  </button>
                  <span id="vocabCategoryPageInfo" class="text-gray-600 text-sm"
                    >Page 1 of 1</span
                  >
                  <button
                    id="vocabCategoryNextPage"
                    class="bg-gray-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm"
                  >
                    Next
                  </button>
                </div>
              </div>
              <!-- Grammar Categories -->
              <div
                class="bg-white p-4 rounded-lg shadow-inner border border-gray-200"
              >
                <h4 class="text-xl font-medium text-gray-800 mb-3">
                  Grammar Categories
                </h4>
                <div class="flex mb-3">
                  <input
                    type="text"
                    id="newGrammarCategoryInput"
                    placeholder="New category name"
                    class="flex-grow p-2 border border-gray-300 rounded-l-lg focus:ring-blue-500 focus:border-blue-500"
                  />
                  <button
                    id="addGrammarCategoryBtn"
                    class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600 transition duration-300"
                  >
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <ul
                  id="grammarCategoryList"
                  class="list-disc pl-5 max-h-40 overflow-y-auto"
                >
                  <!-- Grammar categories will be listed here -->
                </ul>
                <div class="flex justify-between items-center mt-3">
                  <button
                    id="grammarCategoryPrevPage"
                    class="bg-gray-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm"
                  >
                    Previous
                  </button>
                  <span
                    id="grammarCategoryPageInfo"
                    class="text-gray-600 text-sm"
                    >Page 1 of 1</span
                  >
                  <button
                    id="grammarCategoryNextPage"
                    class="bg-gray-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm"
                  >
                    Next
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Learning Statuses Section -->
          <div
            class="bg-gray-50 p-6 rounded-xl shadow-sm border border-gray-200"
          >
            <h3 class="text-2xl font-semibold text-gray-700 mb-4">
              Manage Learning Statuses
              <i class="fas fa-chart-line text-gray-500 ml-2"></i>
            </h3>
            <div class="flex mb-3">
              <input
                type="text"
                id="newStatusInput"
                placeholder="New status name"
                class="flex-grow p-2 border border-gray-300 rounded-l-lg focus:ring-blue-500 focus:border-blue-500"
              />
              <button
                id="addStatusBtn"
                class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600 transition duration-300"
              >
                <i class="fas fa-plus"></i>
              </button>
            </div>
            <ul id="statusList" class="list-disc pl-5 max-h-40 overflow-y-auto">
              <!-- Statuses will be listed here -->
            </ul>
            <div class="flex justify-between items-center mt-3">
              <button
                id="statusPrevPage"
                class="bg-gray-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm"
              >
                Previous
              </button>
              <span id="statusPageInfo" class="text-gray-600 text-sm"
                >Page 1 of 1</span
              >
              <button
                id="statusNextPage"
                class="bg-gray-300 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-400 transition disabled:opacity-50 disabled:cursor-not-allowed text-sm"
              >
                Next
              </button>
            </div>
          </div>

          <!-- Spacer div to push the data management section to a new row if needed -->
          <div class="hidden md:block"></div>

          <!-- Data Management Section -->
          <div
            class="md:col-span-2 bg-gray-50 p-6 rounded-xl shadow-sm border border-gray-200"
          >
            <h3 class="text-2xl font-semibold text-gray-700 mb-4">
              Data Management <i class="fas fa-database text-gray-500 ml-2"></i>
            </h3>
            <div class="flex flex-wrap gap-4">
              <button
                id="exportDataBtn"
                class="bg-green-600 text-white px-5 py-3 rounded-lg hover:bg-green-700 transition duration-300 flex items-center shadow-md"
              >
                <i class="fas fa-download mr-2"></i> Export Data
              </button>
              <button
                id="downloadSampleDataBtn"
                class="bg-blue-500 text-white px-5 py-3 rounded-lg hover:bg-blue-600 transition duration-300 flex items-center shadow-md"
              >
                <i class="fas fa-file-download mr-2"></i> Download Sample
              </button>
              <label
                for="importFileInput"
                class="bg-orange-600 text-white px-5 py-3 rounded-lg hover:bg-orange-700 transition duration-300 cursor-pointer flex items-center shadow-md"
              >
                <i class="fas fa-upload mr-2"></i> Import Data
              </label>
              <input
                type="file"
                id="importFileInput"
                class="hidden"
                accept=".json"
              />
              <button
                id="clearDataBtn"
                class="bg-red-600 text-white px-5 py-3 rounded-lg hover:bg-red-700 transition duration-300 flex items-center shadow-md"
              >
                <i class="fas fa-trash-alt mr-2"></i> Clear All Data
              </button>
            </div>
          </div>

          <!-- Gemini API Key Section -->
          <div
            class="md:col-span-2 bg-gray-50 p-6 rounded-xl shadow-sm border border-gray-200"
          >
            <h3 class="text-2xl font-semibold text-gray-700 mb-4">
              Gemini API Key <i class="fas fa-key text-gray-500 ml-2"></i>
            </h3>
            <div class="flex flex-col sm:flex-row gap-4">
              <input
                type="password"
                id="geminiApiKeyInput"
                placeholder="Enter your Gemini API Key"
                class="flex-grow p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 shadow-sm"
              />
              <button
                id="saveApiKeyBtn"
                class="bg-blue-600 text-white px-5 py-3 rounded-lg hover:bg-blue-700 transition duration-300 shadow-md"
              >
                <i class="fas fa-save mr-2"></i> Save Key
              </button>
              <button
                id="testApiKeyBtn"
                class="bg-gray-600 text-white px-5 py-3 rounded-lg hover:bg-gray-700 transition duration-300 shadow-md"
              >
                <i class="fas fa-vial mr-2"></i> Test Key
              </button>
            </div>
            <p id="apiKeyStatus" class="mt-2 text-sm text-gray-600"></p>
          </div>
        </div>
      </section>
    </main>

    <!-- Vocabulary/Grammar Add/Edit Modal -->
    <div id="dataModal" class="modal-overlay">
      <div class="modal-content">
        <h3
          id="dataModalTitle"
          class="text-2xl font-bold mb-4 text-gray-800"
        ></h3>
        <form id="dataForm" class="space-y-4">
          <div>
            <label
              for="koreanInput"
              class="block text-gray-700 text-sm font-bold mb-2"
              >Korean:</label
            >
            <input
              type="text"
              id="koreanInput"
              class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              required
            />
          </div>
          <div>
            <label
              for="englishInput"
              class="block text-gray-700 text-sm font-bold mb-2"
              >English:</label
            >
            <input
              type="text"
              id="englishInput"
              class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              required
            />
          </div>
          <div>
            <label
              for="categorySelect"
              class="block text-gray-700 text-sm font-bold mb-2"
              >Category:</label
            >
            <select
              id="categorySelect"
              class="shadow border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            ></select>
          </div>
          <div>
            <label
              for="statusSelect"
              class="block text-gray-700 text-sm font-bold mb-2"
              >Status:</label
            >
            <select
              id="statusSelect"
              class="shadow border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-blue-500 focus:border-blue-500"
            ></select>
          </div>
          <div>
            <label
              for="resourceInput"
              class="block text-gray-700 text-sm font-bold mb-2"
              >Resource(s):</label
            >
            <input
              type="text"
              id="resourceInput"
              class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              placeholder="e.g., https://example.com/info, My notes"
            />
            <p class="text-xs text-gray-500 mt-1">
              Enter multiple resources separated by commas (URLs or plain text).
            </p>
            <p class="text-xs text-gray-500 mt-1">
              For adding multiple items efficiently, use "Download Sample" and
              "Import Data (Append)" in Settings.
            </p>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button
              type="button"
              id="cancelDataModalBtn"
              class="bg-gray-300 text-gray-800 px-5 py-2 rounded-lg hover:bg-gray-400 transition duration-300"
            >
              Cancel
            </button>
            <button
              type="submit"
              class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition duration-300"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- AI Explanation Modal -->
    <div id="aiModal" class="modal-overlay">
      <div class="modal-content">
        <h3 class="text-2xl font-bold mb-4 text-gray-800">
          AI Explanation <i class="fas fa-robot text-blue-500 ml-2"></i>
        </h3>
        <div
          id="aiModalContent"
          class="bg-gray-100 p-4 rounded-lg max-h-96 overflow-y-auto text-gray-700 mb-4"
        >
          <p>Loading explanation...</p>
        </div>
        <div class="flex justify-end">
          <button
            type="button"
            id="closeAiModalBtn"
            class="bg-gray-300 text-gray-800 px-5 py-2 rounded-lg hover:bg-gray-400 transition duration-300"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Confirmation/Message Modal (reused for general messages, and import choices) -->
    <div id="messageModal" class="modal-overlay">
      <div class="modal-content">
        <h3
          id="messageModalTitle"
          class="text-xl font-bold mb-4 text-gray-800"
        ></h3>
        <p id="messageModalText" class="text-gray-700 mb-6"></p>
        <div id="messageModalActions" class="flex justify-end space-x-3">
          <!-- Buttons will be dynamically added/hidden based on context -->
          <button
            type="button"
            id="confirmMessageModalBtn"
            class="bg-red-600 text-white px-5 py-2 rounded-lg hover:bg-red-700 transition duration-300 hidden"
          >
            Confirm
          </button>
          <button
            type="button"
            id="cancelMessageModalBtn"
            class="bg-gray-300 text-gray-800 px-5 py-2 rounded-lg hover:bg-gray-400 transition duration-300 hidden"
          >
            Cancel
          </button>
          <button
            type="button"
            id="closeMessageModalBtn"
            class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition duration-300 hidden"
          >
            OK
          </button>
        </div>
      </div>
    </div>

    <!-- Quick Practice Modal -->
    <div id="practiceModal" class="modal-overlay">
      <div class="modal-content">
        <h3 class="text-2xl font-bold mb-4 text-gray-800">
          Quick Practice <i class="fas fa-keyboard text-blue-500 ml-2"></i>
        </h3>
        <p
          id="practiceKorean"
          class="text-3xl font-bold text-center text-blue-700 mb-6"
        ></p>
        <div class="space-y-4">
          <div>
            <label
              for="practiceAnswerInput"
              class="block text-gray-700 text-sm font-bold mb-2"
              >Your English Answer:</label
            >
            <input
              type="text"
              id="practiceAnswerInput"
              class="shadow appearance-none border rounded-lg w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:ring-blue-500 focus:border-blue-500"
              placeholder="Type your answer here"
            />
          </div>
          <p
            id="practiceFeedback"
            class="text-center text-lg font-semibold min-h-[1.5em]"
          ></p>
        </div>
        <div class="flex justify-end space-x-3 mt-6">
          <button
            type="button"
            id="checkPracticeAnswerBtn"
            class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition duration-300"
          >
            Check Answer
          </button>
          <button
            type="button"
            id="closePracticeModalBtn"
            class="bg-gray-300 text-gray-800 px-5 py-2 rounded-lg hover:bg-gray-400 transition duration-300"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Guide/About Modal -->
    <div id="guideModal" class="modal-overlay">
      <div class="modal-content max-w-2xl">
        <h3 class="text-2xl font-bold mb-4 text-gray-800">
          App Guide <i class="fas fa-info-circle text-blue-500 ml-2"></i>
        </h3>
        <div class="tabs mb-4 border-b border-gray-200">
          <button
            class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 hover:border-blue-600 border-b-2 border-transparent active-tab-button"
            data-tab="about"
          >
            About
          </button>
          <button
            class="tab-button py-2 px-4 text-gray-600 hover:text-blue-600 hover:border-blue-600 border-b-2 border-transparent"
            data-tab="how-to-use"
          >
            How to Use
          </button>
        </div>

        <div
          id="aboutTab"
          class="tab-content active-tab-content bg-gray-50 p-4 rounded-lg text-gray-700 prose max-w-none"
        >
          <h4 class="text-xl font-semibold mb-2">About This App</h4>
          <p>
            This is a Smart Korean Learning App designed to help you organize
            and practice your Korean vocabulary and grammar efficiently. It uses
            local storage to save your data directly in your browser, ensuring
            your information is private and always available without an internet
            connection (once loaded).
          </p>
          <p>
            Key features include managing vocabulary and grammar entries,
            categorizing them, tracking learning progress, reviewing with
            flashcards, testing knowledge with quizzes, and integrating with AI
            for explanations (requires a Gemini API key).
          </p>
          <p>
            This application operates entirely offline once loaded in your
            browser, and all your data is stored locally. This means your
            learning progress is private and secure on your device.
          </p>
        </div>

        <div
          id="howToUseTab"
          class="tab-content hidden bg-gray-50 p-4 rounded-lg text-gray-700 prose max-w-none"
        >
          <h4 class="text-xl font-semibold mb-2">How to Use</h4>
          <p>
            Below is a guide to help you get the most out of this Korean
            Learning App:
          </p>
          <h5 class="text-lg font-semibold mt-4 mb-2">1. Navigation</h5>
          <ul>
            <li>
              Use the navigation links in the header (Vocabulary, Grammar,
              Review & Quiz, Settings) to switch between different sections of
              the app.
            </li>
          </ul>
          <h5 class="text-lg font-semibold mt-4 mb-2">
            2. Vocabulary & Grammar Sections
          </h5>
          <ul>
            <li>
              <strong>Search Bar:</strong> Type in the search bar to quickly
              find specific vocabulary words or grammar patterns.
            </li>
            <li>
              <strong>Category Filter:</strong> Use the dropdown to filter items
              by their assigned categories.
            </li>
            <li>
              <strong>Status Filter:</strong> Use the dropdown to filter items
              by their learning status.
            </li>
            <li>
              <strong>Add New Button:</strong> Click this button to add a new
              vocabulary word or grammar pattern.
            </li>
            <li>
              <strong>Table Actions:</strong> Each row in the table provides
              action buttons:
              <ul>
                <li>
                  <i class="fas fa-robot text-blue-500"></i> (Ask AI): Get an
                  explanation for the item using the Gemini AI (requires API
                  Key).
                </li>
                <li>
                  <i class="fas fa-keyboard text-green-500"></i> (Practice):
                  Start a quick typing practice session for that specific item.
                </li>
                <li>
                  <i class="fas fa-edit text-yellow-500"></i> (Edit): Modify the
                  details of an existing item.
                </li>
                <li>
                  <i class="fas fa-trash text-red-500"></i> (Delete): Remove an
                  item from your list.
                </li>
              </ul>
            </li>
            <li>
              <strong>Pagination:</strong> Use the "Previous" and "Next" buttons
              at the bottom of the table to navigate through pages if you have
              many entries.
            </li>
            <li>
              <strong>Resource Field:</strong> When adding or editing an item,
              you can enter multiple resources (URLs or plain text) separated by
              commas in the "Resource(s)" field. For adding multiple items
              efficiently (e.g., from a spreadsheet), consider using the
              "Download Sample" and "Import Data (Append)" features in the
              Settings section.
            </li>
          </ul>
          <h5 class="text-lg font-semibold mt-4 mb-2">
            3. Review & Quiz Section
          </h5>
          <ul>
            <li>
              <strong>Start Flashcards:</strong> Begin a flashcard session with
              all your vocabulary and grammar items. Click on the card to flip
              between Korean and English. Use "Next Card" to proceed.
            </li>
            <li>
              <strong>Start Quiz:</strong> Take a multiple-choice quiz based on
              your entries to test your understanding. Your score will be
              tracked.
            </li>
          </ul>
          <h5 class="text-lg font-semibold mt-4 mb-2">4. Settings Section</h5>
          <ul>
            <li>
              <strong>Manage Categories:</strong>
              <ul>
                <li>
                  Add new custom categories for both vocabulary and grammar.
                </li>
                <li>
                  Delete existing categories. Items associated with a deleted
                  category will be set to 'Uncategorized'.
                </li>
                <li>
                  Use "Previous" and "Next" buttons to paginate through your
                  categories if you have many.
                </li>
              </ul>
            </li>
            <li>
              <strong>Manage Learning Statuses:</strong>
              <ul>
                <li>
                  Add new custom learning statuses (e.g., "Fluent", "Needs
                  Work").
                </li>
                <li>
                  Delete existing statuses. Items with a deleted status will be
                  reset to 'New' or the first available status.
                </li>
                <li>
                  Use "Previous" and "Next" buttons to paginate through your
                  statuses.
                </li>
              </ul>
            </li>
            <li>
              <strong>Data Management:</strong>
              <ul>
                <li>
                  <strong>Export Data:</strong> Download your entire app data as
                  a JSON file to your computer. This is great for backups!
                </li>
                <li>
                  <strong>Download Sample:</strong> Download a sample JSON file
                  to see the data structure or to get started with some example
                  entries.
                </li>
                <li>
                  <strong>Import Data:</strong> Upload a JSON file. You will be
                  prompted to choose whether to
                  <strong>Append Data</strong> (add to your existing data,
                  updating items if IDs match) or
                  <strong>Replace All Data</strong> (overwrite everything with
                  the imported file).
                </li>
                <li>
                  <strong>Clear All Data:</strong> Permanently delete all your
                  vocabulary, grammar, categories, and statuses from the app.
                  Use with extreme caution!
                </li>
              </ul>
            </li>
            <li>
              <strong>Gemini API Key:</strong>
              <ul>
                <li>
                  Enter your personal Gemini API Key here to enable AI-powered
                  explanations.
                </li>
                <li>
                  Click "Save Key" to store it securely in your browser's local
                  storage.
                </li>
                <li>
                  Click "Test Key" to verify if your API key is working
                  correctly.
                </li>
              </ul>
            </li>
          </ul>
          <p class="text-sm italic mt-4">
            Your data is saved automatically in your browser's local storage.
            There is no server-side storage, keeping your data private to your
            device.
          </p>
        </div>

        <div class="flex justify-end mt-6">
          <button
            type="button"
            id="closeGuideModalBtn"
            class="bg-gray-300 text-gray-800 px-5 py-2 rounded-lg hover:bg-gray-400 transition duration-300"
          >
            Close
          </button>
        </div>
      </div>
    </div>

    <!-- Floating Action Button for Guide -->
    <button id="guideFab" title="App Guide">
      <i class="fas fa-question"></i>
    </button>

    <script src="./js/app.js"></script>
  </body>
</html>
